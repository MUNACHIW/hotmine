{% load static %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard </title>
    <link rel="shortcut icon" href="{% static 'hotmine/images/icon.png' %}" type="image/x-icon">
    <link rel="stylesheet" href="{% static 'hotmine/dashboard.css' %}" />
    <link rel="stylesheet" href="{% static 'hotmine/bootstrap-icons/bootstrap-icons.css'%}">
    <link rel="stylesheet" href="{% static 'hotmine/bootstrap.css' %}">
</head>

<body>
    <div class="overlay" id="overlay"></div>

    <div class="container-fluid">
        <div class="sidebar" id="sidebar">
            <img class="logo" src="{% static 'hotmine/images/miney.jpg' %}" alt="Hotmine Logo">
            <hr>
            <ul class="nav-links">
                <li class="active"><a href="/dashboard"><i class="bi bi-house"></i> Dashboard</a></li>
                <li><a href="/profile"><i class="bi bi-person"></i> User profile</a></li>
                <li><a href="/packages"><i class="bi bi-folder2-open"></i> Investment Plans</a></li>
                <li><a href="/my-investments"><i class="bi bi-folder2-open"></i> My Investment</a></li>
                <li><a href="/buy"><i class="bi bi-cart"></i> Buy</a></li>
                <li> <a href="/history"><i class="bi bi-clock-history"></i> History</a></li>
                <li><a href="/updatepassword"><i class="bi bi-lock"></i> Change Password</a></li>
                <li><a href="/withdraw"><i class="bi bi-cash"></i> Withdrawal</a></li>
                <li><a href="/withdrawal-history"><i class="bi bi-list-ul"></i> Withdrawal History</a>
                </li>
                <li class="active"><a href="/logout"><i class="bi bi-box-arrow-right"></i> Logout</a></li>

            </ul>
        </div>

        <div class="tradingview-widget-container" id="mainContent">
            <div class="navbar d-flex justify-content-between align-items-center">
                <div class="d-flex align-items-center">

                    <h2 class="m-2">Dashboard</h2>
                    <div id="google_translate_element"></div>
                </div>
                <div class="d-flex align-items-center dashaccount">
                    <span class="dashaccount"><a href="/profile">Account</a></span>
                    <span class="dashaccount"><a href="/logout">Log out</a></span>
                </div>
                <button class="menu-toggle" id="menuToggle">
                    <i class="bi bi-list"></i>
                </button>
            </div>

            <section class="holder">
                <div class="vip-level">
                    <div>
                        <h4 class="m-2">VIP Level</h4>
                        <p>Your VIP Level</p>
                    </div>
                    <h1 class="fw-bold">GRADE 2</h1>
                </div>
            </section>

            <section class="holder">
                <div class="vip-level">
                    <div>
                        <h4 class="m-2">VIP Level</h4>
                        <p>Your VIP Level</p>
                    </div>
                    <h1 class="fw-bold">${{ amount|floatformat:"0" }}</h1>
                </div>
                <div class="vip-level">
                    <div>
                        <h4 class="m-2">Total Earnings</h4>
                        <p>Total Earnings</p>
                    </div>
                    <h1 class="fw-bold">${{total_earnings|floatformat:"0"}}</h1>
                </div>
                <div class="vip-level">
                    <div>
                        <h4 class="m-2">Total Withdrawn</h4>
                        <p>total earnings wihdrawn</p>
                    </div>
                    <h1 class="fw-bold">${{total_withdraw|floatformat:"0"}}</h1>
                </div>
            </section>
            <div class="m-4">
                <h4>Referal Link</h4>
                <a class="referal" style="border:1px solid black; padding:10px; text-decoration:none;"
                    href="">https://hotmine.org.uk/{{user.username}}</a>
                <button class="colorbtn" type="button" id="copy-wallet" onclick="copyWalletAddress()">
                    <i class="bi bi-clipboard"></i> Copy Address
                </button>
            </div>

            <div id="tradingview_chart" style="height:80vh;width:95%;padding:10px ;">

                <div class="grid">

                </div>

            </div>
        </div>
    </div>

    <script>
        const menuToggle = document.getElementById('menuToggle');
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('overlay');
        const mainContent = document.getElementById('mainContent');

        function toggleSidebar() {
            if (window.innerWidth <= 768) {
                sidebar.classList.toggle('show');
                overlay.classList.toggle('show');
            } else {
                sidebar.classList.toggle('hidden');
                mainContent.classList.toggle('full-width');
            }
        }
        function copyWalletAddress() {
            // Get the referral link text
            const referralLink = document.querySelector('.referal');
            const linkText = referralLink.textContent || referralLink.innerText;

            // Copy to clipboard
            if (navigator.clipboard) {
                navigator.clipboard.writeText(linkText).then(() => {
                    console.log('Copied successfully');
                    alert('Referral link copied to clipboard!');
                }).catch(err => {
                    console.error('Copy failed: ', err);
                });
            } else {
                // Fallback for older browsers
                const textArea = document.createElement("textarea");
                textArea.value = linkText;
                document.body.appendChild(textArea);
                textArea.select();
                document.execCommand('copy');
                document.body.removeChild(textArea);
            }
        }
        menuToggle.addEventListener('click', toggleSidebar);

        overlay.addEventListener('click', () => {
            sidebar.classList.remove('show');
            overlay.classList.remove('show');
        });

        window.addEventListener('resize', () => {
            if (window.innerWidth > 768) {
                sidebar.classList.remove('show');
                overlay.classList.remove('show');
            }
        });
    </script>

    <!-- TradingView Widget Script -->
    <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
    <script defer type="text/javascript"
        src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
    <script type="text/javascript">
        new TradingView.widget({
            container_id: "tradingview_chart",
            symbol: "NASDAQ:AAPL",
            interval: "D",
            timezone: "Etc/UTC",
            theme: "light",
            style: "9",
            locale: "en",
            allow_symbol_change: true,
            autosize: true,
            hide_top_toolbar: false,
            hide_side_toolbar: true,
            save_image: true,
            backgroundColor: "#ffffff",
            gridColor: "rgba(46, 46, 46, 0.06)",
            compareSymbols: [
                { symbol: "OANDA:XAUUSD", position: "SameScale" }
            ],
            studies: ["STD;24h%Volume"]
        });
    </script>
    <script>window.$zoho = window.$zoho || {}; $zoho.salesiq = $zoho.salesiq || { ready: function () { } }</script>
    <script id="zsiqscript"
        src="https://salesiq.zohopublic.com/widget?wc=siq2bea00912d1b1bf53c77d126c6e4e78f69675c420b65348a018865c3bf81620e"
        defer></script>
    <script defer>
        function googleTranslateElementInit() {
            new google.translate.TranslateElement(
                {
                    pageLanguage: 'en',
                    includedLanguages: 'en,es,fr,de,it,pt,ru,ja,ko,zh-CN,zh-TW,ar,hi,sw,nl,sv,da,no,fi,pl,cs,sk,hu,ro,bg,hr,sl,et,lv,lt,el,tr,he,th,vi,ms,id,tl,fa,ur,bn,ta,te,ml,kn,gu,pa,mr,ne,si,my,km,lo,ka,hy,az,kk,ky,uz,tg,mn,is,mt,cy,ga,eu,ca,gl,af,zu,xh,st,tn,ss,ve,ts,nr,yo,ig,ha,am,ti,om,so,mg,ny,sn,rw,lg,ak,tw,bm,ee,ff,kg,ln,lu,sg,wo,zu,bem,loz,lun,nso,zu',
                },
                'google_translate_element'
            );
        }
    </script>
</body>


</html>